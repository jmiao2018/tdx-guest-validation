# @name tdxio_iommufd_passthrough
# @desc Check tdx-io device passthrough in iommufd mode
# @requires tdx-io
# @setup_requires
# @utility_requires

#iommufd mode passthrough
TDXIO_XS_FUNC_IOMMUFD_1PF_PRIVATE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_PRIVATE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_PRIVATE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_PRIVATE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_PRIVATE_TPANA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_PRIVATE_TPAKILL tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_PRIVATE_VDSMKILL tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_PRIVATE_DSMKILL tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_SHARE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_SHARE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_SHARE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1PF_SHARE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2PF_PRIVATE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2PF_PRIVATE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2PF_PRIVATE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2PF_PRIVATE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2PF_SHARE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2PF_SHARE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2PF_SHARE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2PF_SHARE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2PF_MIX_DMA_CONCURRENT tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_3PF_PRIVATE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_3PF_PRIVATE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_3PF_PRIVATE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_3PF_PRIVATE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_4PF_PRIVATE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_4PF_PRIVATE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_4PF_PRIVATE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_4PF_PRIVATE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VM_CONFINED tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VM_LOCAL tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VM_REMOTE tdxio_guest_func.sh -t DMATEST

#P2P MMIO
TDXIO_XS_FUNC_IOMMUFD_CONFINED_P2P_PRIVATE_PRIVATE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_CONFINED_P2P_PRIVATE_SHARE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_CONFINED_P2P_SHARE_PRIVATE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_CONFINED_P2P_SHARE_SHARE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_LOCAL_P2P_PRIVATE_PRIVATE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_LOCAL_P2P_PRIVATE_SHARE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_LOCAL_P2P_SHARE_PRIVATE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_LOCAL_P2P_SHARE_SHARE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_REMOTE_P2P_PRIVATE_PRIVATE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_REMOTE_P2P_PRIVATE_SHARE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_REMOTE_P2P_SHARE_PRIVATE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_REMOTE_P2P_SHARE_SHARE tdxio_guest_func.sh -t DMATEST

#SR-IOV
TDXIO_XS_FUNC_IOMMUFD_1VF_PRIVATE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1VF_PRIVATE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1VF_PRIVATE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1VF_PRIVATE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1VF_SHARE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1VF_SHARE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1VF_SHARE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_1VF_SHARE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VF_PRIVATE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VF_PRIVATE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VF_PRIVATE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VF_PRIVATE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VF_SHARE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VF_SHARE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VF_SHARE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VF_SHARE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_2VF_MIX_DMA_CONCURRENT tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_64VF_PRIVATE_LIFECYCLE tdxio_guest_func.sh -t DMATEST # Lion device maximum #VF - 64
TDXIO_XS_FUNC_IOMMUFD_64VF_PRIVATE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_64VF_PRIVATE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_64VF_PRIVATE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_64VF_SHARE_LIFECYCLE tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_64VF_SHARE_DMA tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_64VF_SHARE_DMA_100TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_XS_FUNC_IOMMUFD_64VF_SHARE_DMA_LARGESIZE tdxio_guest_func.sh -t DMATEST

#passthrough stress
TDXIO_L_STRESS_IOMMUFD_2PF_MIX_LIFECYCLE_10TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_L_STRESS_IOMMUFD_2PF_CONFINE_PRIVATE_LIFECYCLE_50TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_L_STRESS_IOMMUFD_2PF_LOCAL_PRIVATE_LIFECYCLE_50TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_L_STRESS_IOMMUFD_2PF_REMOTE_PRIVATE_LIFECYCLE_50TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_L_STRESS_IOMMUFD_4PF_PRIVATE_LIFECYCLE_50TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_L_STRESS_IOMMUFD_2VM_CONFINED_LIFECYCLE_50TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_L_STRESS_IOMMUFD_2VM_LOCAL_LIFECYCLE_50TIMES tdxio_guest_func.sh -t DMATEST
TDXIO_L_STRESS_IOMMUFD_2VM_REMOTE_LIFECYCLE_50TIMES tdxio_guest_func.sh -t DMATEST
